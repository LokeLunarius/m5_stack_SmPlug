{"components":[{"id":"_coretwoscreen","createTime":1704554033224,"name":"screen","x":0,"y":0,"width":320,"height":240,"backgroundColor":"#FFFFFF","backgroundImage":"","size":0,"screenType":"default","type":"screen"},{"id":"____buttonA","createTime":1704554033224,"name":"ButtonA","buttonIndex":0,"x":35,"y":216,"width":64,"height":24,"text":"ButtonA","visibility":false,"type":"button"},{"id":"____buttonB","createTime":1704554033224,"name":"ButtonB","buttonIndex":1,"x":125,"y":216,"width":64,"height":24,"text":"ButtonB","visibility":false,"type":"button"},{"id":"____buttonC","createTime":1704554033224,"name":"ButtonC","buttonIndex":2,"x":215,"y":216,"width":64,"height":24,"text":"ButtonC","visibility":false,"type":"button"}],"type":"core2","versions":"Beta","units":[{"id":"JjPT#hc-9L_lEku3","createTime":1704554077068,"hidden":false,"type":"relay4","name":"relay4_0","port":"A","default":["A","E","PAHUB","Custom"],"pb_port":[0,1,2,3,4,5],"new_pb_port":"0","user_port":["21","22"],"icon":"relay4.png","url":"https://docs.m5stack.com/en/unit/4relay"},{"id":"2slV!eq*IRyTZHam","createTime":1704554100739,"type":"ac_measure","name":"ac_measure_0","port":"A","default":["A","E","PAHUB","Custom"],"pb_port":[0,1,2,3,4,5],"new_pb_port":"0","user_port":["21","22"],"icon":"AC Measure.png","url":"https://docs.m5stack.com/en/unit/AC%20Measure%20Unit","new_port":"A","new_default":["A","E","PAHUB","Custom"]}],"hats":[],"stamps":[],"blockly":"<variables><variable id=\"Nv%8LJ#!8Pjz7!zTlBIV\">relay_1_status</variable><variable id=\"n%aPc=^Ll*,xdeZJ1k@K\">relay_2_status</variable><variable id=\"?fIG}pES|@JF,i*l_z%/\">relay_3_status</variable><variable id=\"`Rh9M7g6~DNiL=#j[LL4\">data_status</variable><variable id=\"@3V7~]AP*p?:I/S]h!5u\">voltage</variable><variable id=\")+h-XdD|hF4,bC3GZYZU\">current</variable><variable id=\"wZCX]cKpo0%[#uS!pZys\">active_power</variable><variable id=\"cT}s8WGhm.9BE07+|9aw\">apparent_power</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><next><block type=\"unit_acmeasure_init\" id=\".Q:u][]nWcOEotTe-^6~\"><field name=\"VARNAME\">ac_measure_0</field><value name=\"value\"><shadow type=\"math_number\" id=\"y?N4Z/%FBP^R/EYRV%f/\"><field name=\"NUM\">0x42</field></shadow></value><next><block type=\"mqtt_set_client\" id=\"Nps{B=O*6?(+92r@|NBo\"><value name=\"ID\"><shadow type=\"text\" id=\"[CJX9)!,HR0dJC579uhS\"><field name=\"TEXT\">client</field></shadow></value><value name=\"SERVER\"><shadow type=\"text\" id=\"t*t~FNzTORNPQ/eZ};h4\"><field name=\"TEXT\">io.adafruit.com</field></shadow></value><value name=\"PORT\"><shadow type=\"math_number\" id=\"Ax4t$XdUS:F^|(/vT;SF\"><field name=\"NUM\">1883</field></shadow></value><value name=\"USER\"><shadow type=\"text\" id=\"R+ZPB]!WAtqvl}57@Kj(\"><field name=\"TEXT\">Loke</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text_password\" id=\"xP0YDn=$%nUf:p!tEfbw\"><field name=\"TEXT\">aio_TNty62EM5TaqPF4cb4ZX9dd6p9fx</field></shadow></value><value name=\"KEEPALIVE\"><shadow type=\"math_slider\" id=\"Bd1Tj@OKk_!=nv|1V5=0\"><field name=\"NUM\" max=\"65536\" step=\"1\">300</field></shadow></value><next><block type=\"mqtt_start\" id=\"BzY=uV%*wS_}nwBVWILE\"><next><block type=\"variables_set\" id=\"[#`h%r_rryghQ5w$1SL7\"><field name=\"VAR\" id=\"@3V7~]AP*p?:I/S]h!5u\">voltage</field><value name=\"VALUE\"><block type=\"math_number\" id=\"PH8*wq]6gI0fdS89/f6P\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"A1]~%?LX)Mza:;U,tL/~\"><field name=\"VAR\" id=\")+h-XdD|hF4,bC3GZYZU\">current</field><value name=\"VALUE\"><block type=\"math_number\" id=\"6;RSJssgDi|mZ?c*L7pq\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"3j}?0=F?2Ru{kx}6nSuQ\"><field name=\"VAR\" id=\"wZCX]cKpo0%[#uS!pZys\">active_power</field><value name=\"VALUE\"><block type=\"math_number\" id=\")g1c34GaCC~`;%7Zk`vT\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\",lD1D.[d`i/N?XeK/E|]\"><field name=\"VAR\" id=\"cT}s8WGhm.9BE07+|9aw\">apparent_power</field><value name=\"VALUE\"><block type=\"math_number\" id=\"OH=p+h#^hOLqhFPAs?F-\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"hPjvP,a4gGLq;S=~6=FM\"><field name=\"VAR\" id=\"Nv%8LJ#!8Pjz7!zTlBIV\">relay_1_status</field><value name=\"VALUE\"><block type=\"math_number\" id=\"IZ#,dfE;iHt0{i;r).N]\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"T@%;qTp2cUktft[0(NZ*\"><field name=\"VAR\" id=\"n%aPc=^Ll*,xdeZJ1k@K\">relay_2_status</field><value name=\"VALUE\"><block type=\"math_number\" id=\"_-AdNPBU$kO0Fp{)O)7b\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\".(CQu,y^s1c?%pa`GtAI\"><field name=\"VAR\" id=\"?fIG}pES|@JF,i*l_z%/\">relay_3_status</field><value name=\"VALUE\"><block type=\"math_number\" id=\"8?W%]:.,n}M67(?BPN-F\"><field name=\"NUM\">0</field></block></value><next><block type=\"timer_setTimerAttr\" id=\"vJ=8dAfbteY22H0*JUhG\"><field name=\"start_name\">data_capture</field><field name=\"mode\">0x00</field><value name=\"period\"><shadow type=\"math_number\" id=\"HE[3gVY1{`j[^DRwFt!%\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"timer_setTimerAttr\" id=\"AAF=w,$l;66!:s[2`HCD\"><field name=\"start_name\">relay_status_read</field><field name=\"mode\">0x00</field><value name=\"period\"><shadow type=\"math_number\" id=\"y+KUQ:g7srRlh-@r7`((\"><field name=\"NUM\">500</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type=\"mqtt_sub\" id=\"R!un5ph?$yI#e^G**2x)\" x=\"590\" y=\"50\"><value name=\"FROM\"><shadow type=\"text\" id=\"sMEUUGE3Y}zmJrqjI.5(\"><field name=\"TEXT\">Loke/feeds/m5-relay-status.m5-relay-1</field></shadow></value><statement name=\"FUNC\"><block type=\"variables_set\" id=\"c-GB#Kh%Y$_ygpN,J!l]\"><field name=\"VAR\" id=\"Nv%8LJ#!8Pjz7!zTlBIV\">relay_1_status</field><value name=\"VALUE\"><block type=\"mqtt_get_topic_data\" id=\"h^$fu[_/Lxd%UFfVrhU5\"></block></value></block></statement></block><block type=\"mqtt_sub\" id=\"6yqwg];dpbgN9nEv,bs@\" x=\"590\" y=\"150\"><value name=\"FROM\"><shadow type=\"text\" id=\":TsQ^KKP]hW$*y9-hI_F\"><field name=\"TEXT\">Loke/feeds/m5-relay-status.m5-relay-2</field></shadow></value><statement name=\"FUNC\"><block type=\"variables_set\" id=\"lTUNPs3,kuKYXeKoj.cw\"><field name=\"VAR\" id=\"n%aPc=^Ll*,xdeZJ1k@K\">relay_2_status</field><value name=\"VALUE\"><block type=\"mqtt_get_topic_data\" id=\"{Wli+H+y9ULG{Yc:J4SR\"></block></value></block></statement></block><block type=\"mqtt_sub\" id=\"!9ysz-LwxmN2Q7ED!Q/:\" x=\"590\" y=\"250\"><value name=\"FROM\"><shadow type=\"text\" id=\"%dLj7a+sk!-(ckVb5}a1\"><field name=\"TEXT\">Loke/feeds/m5-relay-status.m5-relay-3</field></shadow></value><statement name=\"FUNC\"><block type=\"variables_set\" id=\"6j[`O4d;QrBRI0)5%yJz\"><field name=\"VAR\" id=\"?fIG}pES|@JF,i*l_z%/\">relay_3_status</field><value name=\"VALUE\"><block type=\"mqtt_get_topic_data\" id=\"Gx%72+Z*^#SgF3@NE4{9\"></block></value></block></statement></block><block type=\"timer_callback\" id=\"G8`k/!sg@YEq178/y6}L\" x=\"550\" y=\"430\"><field name=\"name\">data_capture</field><statement name=\"FUNC\"><block type=\"variables_set\" id=\"C=AIrctfmVXXQWg|;pS!\"><field name=\"VAR\" id=\"`Rh9M7g6~DNiL=#j[LL4\">data_status</field><value name=\"VALUE\"><block type=\"unit_acmeasure_data_ready\" id=\"-)`+tg?0,P@z]u0=11?p\"><field name=\"VARNAME\">ac_measure_0</field></block></value><next><block type=\"controls_if\" id=\"*[crHI-xDp1Z}~-%~OQc\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"eD91j[44gs:=qtwYJ;eN\"><field name=\"VAR\" id=\"`Rh9M7g6~DNiL=#j[LL4\">data_status</field></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\";EBp#+(aViSY`I%NCMB:\"><field name=\"VAR\" id=\"@3V7~]AP*p?:I/S]h!5u\">voltage</field><value name=\"VALUE\"><block type=\"unit_acmeasure_get_voltage\" id=\"~Zkv:K)Oq)=x]|ALt9LR\"><field name=\"VARNAME\">ac_measure_0</field></block></value><next><block type=\"variables_set\" id=\"Ed[m9J+eoLHLW7u4I`nQ\"><field name=\"VAR\" id=\")+h-XdD|hF4,bC3GZYZU\">current</field><value name=\"VALUE\"><block type=\"unit_acmeasure_get_current\" id=\"^Ec{pY(|?lw$[2DmvP%j\"><field name=\"VARNAME\">ac_measure_0</field></block></value><next><block type=\"variables_set\" id=\"VS|38**1(3y(PX~lS5Me\"><field name=\"VAR\" id=\"wZCX]cKpo0%[#uS!pZys\">active_power</field><value name=\"VALUE\"><block type=\"unit_acmeasure_get_active_power\" id=\"67G_vB:Nat@Wd*l5XH/B\"><field name=\"VARNAME\">ac_measure_0</field></block></value><next><block type=\"variables_set\" id=\"A;$:*{2:M;I8IH]AY9bh\"><field name=\"VAR\" id=\"cT}s8WGhm.9BE07+|9aw\">apparent_power</field><value name=\"VALUE\"><block type=\"unit_acmeasure_get_apparent_power\" id=\"*/iiCTamh_~4O6lN,{Ny\"><field name=\"VARNAME\">ac_measure_0</field></block></value><next><block type=\"mqtt_publish\" id=\"!6Hmbn7yV(/:0Q.-.-*#\"><value name=\"FROM\"><shadow type=\"text\" id=\"w|~Egm?x$eI3~uEx5m[V\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.voltage</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"}9d(MtwR7dYiy@GWRWRN\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"`ye+W!Y$3o7px6KuK_HS\"><field name=\"VAR\" id=\"@3V7~]AP*p?:I/S]h!5u\">voltage</field></block></value><value name=\"qos\"><shadow type=\"math_slider\" id=\";ao8*b{3HS_,5`^g/T?1\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"%rH*`]5#UVqIpP~XjFvI\"><value name=\"FROM\"><shadow type=\"text\" id=\"gc1JMDnJrec28$`~DCB^\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.current</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"iO:!uJIwfDJ_{jC69:bc\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"I9iY$AVVnwHxa/,;jtR[\"><field name=\"VAR\" id=\")+h-XdD|hF4,bC3GZYZU\">current</field></block></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"psz:LTx9juWJV6!tZeTW\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"SVnF)K59~D!oWRV7Mn@9\"><value name=\"FROM\"><shadow type=\"text\" id=\"+pGCV$`S87aww;WD()L,\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.active-power</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"+4DW;ExZBGp0CejFcNye\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"`NiET`A=0i2)y}T$FXGH\"><field name=\"VAR\" id=\"wZCX]cKpo0%[#uS!pZys\">active_power</field></block></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"*M/:=d`XJ#V)Qf!,w4)a\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"UAwK:lRc1n)x]|D?k=Vd\"><value name=\"FROM\"><shadow type=\"text\" id=\"ber9oFR3K?2z4i=tN{6B\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.apparent-power</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"?u7kKVz)`jDQoqv{`=5n\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"|/osS@+4tK_-qr%vh.ua\"><field name=\"VAR\" id=\"cT}s8WGhm.9BE07+|9aw\">apparent_power</field></block></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"^TZ}[Uq0s81:E0NWpBPG\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"mqtt_publish\" id=\"z/lgYkaBUIM6qVUW^3Z]\"><value name=\"FROM\"><shadow type=\"text\" id=\"`.y3T(tRSPp02q7Ayq)5\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.voltage</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"b1tWFS4APRb`a:z1hXOk\"><field name=\"TEXT\">220</field></shadow></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"X@ep9V5!{MUf}-6ywrj?\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"A3H_e(SUCa[b)[)J:/Pw\"><value name=\"FROM\"><shadow type=\"text\" id=\"3i{u+avCJ`tjn?Wmab%)\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.current</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"Kb/k+K9|*4Xy*jAGq|nU\"><field name=\"TEXT\">0</field></shadow></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"*;KDJ4N{@JlDs(@BECb/\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"YXlO_8s=9r*I1RP*I,4u\"><value name=\"FROM\"><shadow type=\"text\" id=\"`S!^-*n,1lyPiCx/b{bN\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.active-power</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"WEF?vl+G$vN]nBES;ohy\"><field name=\"TEXT\">0</field></shadow></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"hQF$[8~8R;uaWbdLGFp2\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value><next><block type=\"mqtt_publish\" id=\"tWv2V%2x|s%wL*S%6[2~\"><value name=\"FROM\"><shadow type=\"text\" id=\"nbI5HcNSc|g5S_jTSeyv\"><field name=\"TEXT\">Loke/feeds/m5-electrical-data.apparent-power</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\",*T@#pEvzTJ6P-kbSTbY\"><field name=\"TEXT\">0</field></shadow></value><value name=\"qos\"><shadow type=\"math_slider\" id=\"QNPBch{8n=8#_aKNpP!I\"><field name=\"NUM\" max=\"2\" step=\"1\">0</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type=\"timer_callback\" id=\"DaLODwoGFuUV4Jk@J(i(\" x=\"50\" y=\"630\"><field name=\"name\">relay_status_read</field><statement name=\"FUNC\"><block type=\"controls_if\" id=\"^Y5XFw[BccXJ{~tN@#~+\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"85Q9C#gl)fbYC(Pd3,C^\"><field name=\"VAR\" id=\"Nv%8LJ#!8Pjz7!zTlBIV\">relay_1_status</field></block></value><statement name=\"DO0\"><block type=\"relay4_set_status\" id=\"U}8%a8s47ttl6?ivpqG/\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"NDPVZ:}=i7=Ctr?r.%q_\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">1</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"`ZWFJEC/xZL:DXd8Uh)!\"><field name=\"NUM\" max=\"1\" step=\"1\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"relay4_set_status\" id=\"1!cU/F)3`Q$xlvqZp(`Y\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"_bPJ@ji;!}?HJFh!t#NJ\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">1</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"hJ7HseFo0a*1{!%XuDC6\"><field name=\"NUM\" max=\"1\" step=\"1\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"5^yyN@oq_BeWFmh$pgE5\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\";v@p-EjJgO{SWc`(Xc0f\"><field name=\"VAR\" id=\"n%aPc=^Ll*,xdeZJ1k@K\">relay_2_status</field></block></value><statement name=\"DO0\"><block type=\"relay4_set_status\" id=\"(F3$GnOZwCPa[`w.:2or\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"=Co6xeeK3[vJsds2ZNc(\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">2</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"amSu.,+%,F]:dVgedW~;\"><field name=\"NUM\" max=\"1\" step=\"1\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"relay4_set_status\" id=\";=+yom+%neVy:@ol!hse\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"?]K:9Yj`1-mOy/#$vdP[\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">2</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"IFxTgJtc.A1;b^SDy=a8\"><field name=\"NUM\" max=\"1\" step=\"1\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"#?!8f4xWEi6JfykHjGV^\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"-]P6tcXzeBBS}S^qS(fK\"><field name=\"VAR\" id=\"?fIG}pES|@JF,i*l_z%/\">relay_3_status</field></block></value><statement name=\"DO0\"><block type=\"relay4_set_status\" id=\":r_;z(EavrL#(}82a,BZ\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"mdORjLNp;Jra![7yb]6e\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">3</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"PT;|Lr+eI-eQ*q/%-e!3\"><field name=\"NUM\" max=\"1\" step=\"1\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"relay4_set_status\" id=\"}fvLtC3pgjPpC8-mIT7n\"><field name=\"NAME\">relay4_0</field><value name=\"num\"><shadow type=\"math_slider\" id=\"l|CjPypv1UF$`29zAHEI\"><field name=\"NUM\" min=\"1\" max=\"4\" step=\"1\">3</field></shadow></value><value name=\"state\"><shadow type=\"math_slider\" id=\"r5{-OV!-_)E%RWQIM:qO\"><field name=\"NUM\" max=\"1\" step=\"1\">0</field></shadow></value></block></statement></block></next></block></next></block></statement></block>","Blockly.Remotes":[],"Blockly.RemotePlus":[{"id":"__title","blockId":"","createTime":1704554033172,"name":"M5RemoteTitle","dragAndDrop":false,"resizable":false,"options":{"minWidth":1,"minHeight":1,"maxWidth":6,"maxHeight":10,"defaultWidth":2,"defaultHeight":1},"w":2,"h":1,"bgColor":"#0080FF","color":"#fff","fontsize":"M","label":"M5Remote","interval":3000,"code":"","event":"","dataSource":"none","ezdataToken":"39omLyDsQTGY7JooyRmQNJJx9ukdAFLS","topic":"","needShadow":false,"type":"title","x":null,"y":null}],"modules":[],"cbIdList_":[],"eventCBIdList_":[],"uuid":"f4ff73b8-3fb2-4262-b02a-9d47b4461dc3"}